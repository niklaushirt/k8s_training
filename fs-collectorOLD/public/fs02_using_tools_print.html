<h4 id="task-introduction">Task Introduction</h4><h3 id="getting-comfortable-with-kubectl-and-docker">Getting comfortable with kubectl and docker</h3><p>During this course the student will be required to use the CLI tools cloudctl and kubectl.  </p><p>Tasks will describe a challenge.  The student must execute the appropriate command(s) to obtain the needed information.  Be sure to review the Step-by-Step instructions and press the button to mark the task complete. </p><p>If at any time you are needing assistance press the <strong>Hint</strong> button.  If you are still needing assistance use the <strong>Step-by-Step</strong> button to get detailed instructions for the task.</p><ul><li><p>The instructor will provide the IP address of target IBM Cloud Environment (ICP) environment along with the credentials to authenticate.  </p></li><li><p>Using the cloudctl CLI authenticate to the ICP environment with the instructor provided credentials:</p><p>  <strong>cloudctl login -a https://&#60;IP Address&#62;:8443 -u admin -n &#60;team&#62; --skip-ssl-validation</strong></p><p>  &#60;IP Address&#62;  - replace with instructor provided information<br>  &#60;team&#62;        - replace with team name</p></li></ul><h4 id="hint-introduction">Hint Introduction</h4><p>No hint necessary for the introduction.</p><hr><h4 id="step-by-step-introduction">Step-by-Step Introduction</h4><p>No step-by-step necessary for the introduction.  Once done reading the introduction select another task to begin.</p><hr><h4 id="task-t01">Task T01</h4><p>What are the node names in the cluster?  Use both the kubectl and cloudctl CLIs to get this informaiton.</p><h4 id="hint-t01">Hint T01</h4><p>kubectl get nodes -o wide    (use the -o wide parameter to get more information)</p><p>cloudctl cm nodes</p><hr><h4 id="step-by-step-t01">Step-by-Step T01</h4><p>kubectl example:</p><br><pre><code>Command:<br>    kubectl get nodes -o wide  (OR)  kubectl get nodes<br><br>Example output:<br><br>NAME           STATUS    ROLES         AGE       VERSION       INTERNAL-IP    EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION      CONTAINER-RUNTIME<br>10.135.8.195   Ready     worker        20h       v1.11.5+icp   10.135.8.195   &lt;none&gt;        Ubuntu 16.04.5 LTS   4.4.0-135-generic   docker://18.3.1<br>10.135.8.213   Ready     worker        20h       v1.11.5+icp   10.135.8.213   &lt;none&gt;        Ubuntu 16.04.5 LTS   4.4.0-135-generic   docker://18.3.1<br>10.135.8.214   Ready     worker        20h       v1.11.5+icp   10.135.8.214   &lt;none&gt;        Ubuntu 16.04.5 LTS   4.4.0-135-generic   docker://18.3.1<br>10.135.8.232   Ready     etcd,master   20h       v1.11.5+icp   10.135.8.232   &lt;none&gt;        Ubuntu 16.04.5 LTS   4.4.0-140-generic   docker://18.3.1<br>10.135.8.233   Ready     management    20h       v1.11.5+icp   10.135.8.233   &lt;none&gt;        Ubuntu 16.04.5 LTS   4.4.0-135-generic   docker://18.3.1<br>10.135.8.244   Ready     proxy         20h       v1.11.5+icp   10.135.8.244   &lt;none&gt;        Ubuntu 16.04.5 LTS   4.4.0-135-generic   docker://18.3.1<br>10.135.8.248   Ready     worker        20h       v1.11.5+icp   10.135.8.248   &lt;none&gt;        Ubuntu 16.04.5 LTS   4.4.0-135-generic   docker://18.3.1</code></pre><p>cloudctl example:</p><br><pre><code>Command:<br>    cloudctl cm nodes<br><br>Example output:<br><br>ID             Type     Private IP     Public IP   Machine Type   State      K8s Status   <br>faststart-m1   master   10.135.8.232   -           -              deployed   Ready   <br>faststart-p1   proxy    10.135.8.244   -           -              deployed   Ready   <br>faststart-w1   worker   10.135.8.195   -           -              deployed   Ready   <br>faststart-w2   worker   10.135.8.213   -           -              deployed   Ready   <br>faststart-w3   worker   10.135.8.214   -           -              deployed   Ready   <br>faststart-w4   worker   10.135.8.248   -           -              deployed   Ready   </code></pre><blockquote><p>Confirm T01 complete</p><div><button class="btn btn-success" onclick="markComplete('CS-102 :- MarkComplete T01 complete')">Press to mark completed</button></div></blockquote><hr><h4 id="task-t02">Task T02</h4><p>What is the Allocatable CPU count for the master node?  </p><h4 id="hint-t02">Hint T02</h4><p>Describe the master node using the name from previous results.</p><hr><h4 id="step-by-step-t02">Step-by-Step T02</h4><br><pre><code>Command:<br>    kubectl describe node &lt;master node name&gt;    <br><br>View output section Allocatable, and find cpu. Example:<br><br>. . .<br>Allocatable:<br>    cpu:                16<br>     ...<br>     pods:               160<br>    ...</code></pre><blockquote><p>Confirm T02 complete</p><div><button class="btn btn-success" onclick="markComplete('CS-102 :- MarkComplete T02 complete')">Press to mark completed</button></div></blockquote><hr><h4 id="task-t03">Task T03</h4><p>Display the top CPU and Memory for all nodes and display the top pods</p><h4 id="hint-t03">Hint T03</h4><p>kubectl top <???></p><h4 id="step-by-step-t03">Step-by-Step T03</h4><br><pre><code>Command:<br>    kubectl top nodes<br><br>Example output:<br><br>NAME             CPU(cores)   CPU%      MEMORY(bytes)   MEMORY%<br>10.186.56.74     812m         5%        12278Mi         38%<br>10.186.56.76     839m         10%       10765Mi         67%<br>10.186.56.85     109m         0%        2453Mi          7%<br>10.187.230.157   108m         0%        2608Mi          8%</code></pre><blockquote><p>Confirm T03 complete</p><div><button class="btn btn-success" onclick="markComplete('CS-102 :- MarkComplete T03 complete')">Press to mark completed</button></div></blockquote><hr><h4 id="task-t04">Task T04</h4><p>Display the status of the cluster components.  </p><h4 id="hint-t04">Hint T04</h4><p>Command contains the componentstatuses as a parameter.</p><hr><h4 id="step-by-step-t04">Step-by-Step T04</h4><br><pre><code>Command:<br>    kubectl get componentstatuses<br><br>Example output:<br><br>NAME                 STATUS    MESSAGE              ERROR<br>controller-manager   Healthy   ok<br>scheduler            Healthy   ok<br>etcd-0               Healthy   {&quot;health&quot;: &quot;true&quot;}</code></pre><blockquote><p>Confirm T04 complete</p><div><button class="btn btn-success" onclick="markComplete('CS-102 :- MarkComplete T04 complete')">Press to mark completed</button></div></blockquote><hr><h4 id="task-t05">Task T05</h4><p>What taints are defined for management and worker nodes?</p><h4 id="hint-t05">Hint T05</h4><p>Use node names from kubectl get nodes results.</p><hr><h4 id="step-by-step-t05">Step-by-Step T05</h4><br><pre><code>Command:<br>    kubectl describe node &lt;name of management node&gt;<br>    kubectl describe node &lt;name of worker node&gt;<br><br>Example output:<br><br>Mgmt   -     Taints:             dedicated=infra:NoSchedule<br>Worker -     Taints:             &lt;none&gt;</code></pre><blockquote><p>Confirm T05 complete</p><div><button class="btn btn-success" onclick="markComplete('CS-102 :- MarkComplete T05 complete')">Press to mark completed</button></div></blockquote><hr><h4 id="task-t06">Task T06</h4><p>How many pods in the kube-system namespace begin with auth?</p><h4 id="hint-t06">Hint T06</h4><p>Think at the pod level</p><hr><h4 id="step-by-step-t06">Step-by-Step T06</h4><br><pre><code>Command:<br>    kubectl get pods -n kube-system   (consider using grep to reduce the volume of output)<br><br>Example output:<br><br>auth-apikeys-h2lzz                                    1/1       Running     0          8d<br>auth-idp-5ghjh                                        4/4       Running     0          8d<br>auth-pap-72xhq                                        2/2       Running     0          8d<br>auth-pdp-9pjzd                                        2/2       Running     0          8d</code></pre><blockquote><p>Confirm T06 complete</p><div><button class="btn btn-success" onclick="markComplete('CS-102 :- MarkComplete T06 complete')">Press to mark completed</button></div></blockquote><hr><h4 id="task-t07">Task T07</h4><p>Set the default namespace to kube-system using the kubectl config set-context capability.</p><h4 id="hint-t07">Hint T07</h4><p>Be sure to include:  faststart-context --namespace=kube-system</p><hr><h4 id="step-by-step-t07">Step-by-Step T07</h4><br><pre><code>Command:<br>    kubectl config set-context faststart-context --namespace=kube-system<br><br>Example output:<br><br>Context &quot;faststart-context&quot; modified.</code></pre><blockquote><p>Confirm T07 complete</p><div><button class="btn btn-success" onclick="markComplete('CS-102 :- MarkComplete T07 complete')">Press to mark completed</button></div></blockquote><hr><h4 id="task-t08">Task T08</h4><p>What are the container names in the pod that begins with auth-pap?  </p><h4 id="hint-t08">Hint T08</h4><p>Full pod name will be similar to:  auth-pap-72xhq</p><hr><h4 id="step-by-step-t08">Step-by-Step T08</h4><br><pre><code>Command:<br>    kubectl describe pod auth-pap-72xhq  (or) <br>    kubectl get pod -l component=auth-pap -o=jsonpath=&#39;{.items[*].spec.containers[*].name}&#39;<br><br>Example output:<br><br>- describe output: search for section Containers: and then view each container name:<br><br>Containers:<br>  icp-audit-service:<br>    . . . <br>  auth-pdp    <br><br>- get pod output:  (each container name is listed with a space seperator)<br><br>icp-audit-service auth-pap</code></pre><blockquote><p>Confirm T08 complete</p><div><button class="btn btn-success" onclick="markComplete('CS-102 :- MarkComplete T08 complete')">Press to mark completed</button></div></blockquote><hr><h4 id="task-t09">Task T09</h4><p>What is the first message in the container log for pod that begins with unified-router?  The pod is in the kube-system namespace.  The full pod name will be similar to:  unified-router-k768f</p><h4 id="hint-t09">Hint T09</h4><p>kubectl logs <pod></p><hr><h4 id="step-by-step-t09">Step-by-Step T09</h4><br><pre><code>Command:<br>    kubectl get pods -n kube-system<br><br>Example output:<br><br>NAME                                                           READY     STATUS      RESTARTS   AGE<br>audit-logging-fluentd-ds-7v5br                                 1/1       Running     0          20h<br><br>                . . . data truncated . . .<br><br>tiller-deploy-5d8494fb8-sjmbn                                  1/1       Running     0          21h<br>unified-router-4ltff                                           1/1       Running     0          20h<br>web-terminal-f77dc4d7d-stzgj                                   1/1       Running     0          20h<br><br><br>Command:<br>    kubectl logs unified-router-?????      &lt;=== use the pod name from the previous output<br><br>Example output:<br><br>2018/12/21 00:00:39 Using HTTP port: 9090</code></pre><hr><blockquote><p>Confirm T09 complete</p><div><button class="btn btn-success" onclick="markComplete('CS-102 :- MarkComplete T09 complete')">Press to mark completed</button></div></blockquote><h4 id="task-t10">Task T10</h4><p>Exec into pod mariadb-0 and using the command: ls -la /sys  list the contents for the directory.  To lose the prompt enter the exit command.</p><h4 id="hint-t10">Hint T10</h4><p>Don&#39;t forget the -it parameter.Don&#39;t forget the command follows double dashes e.g. -- /bin/bashTry the sh or /bin/bash for the entrypoint of the pod</p><hr><h4 id="step-by-step-t10">Step-by-Step T10</h4><br><pre><code>Command:<br>    kubectl exec -it mariadb-0 -- sh   (or)  kubectl exec -it mariadb-0 -- /bin/bash<br><br>Example output: <br><br>dr-xr-xr-x  13 root root    0 Dec 29 18:22 .<br>drwxr-xr-x   1 root root 4096 Dec 20 23:50 ..<br>drwxr-xr-x   2 root root    0 Dec 29 18:25 block<br>. . .<br>drwxr-xr-x   2 root root    0 Dec 29 18:25 power</code></pre><hr><blockquote><p>Confirm T10 complete</p><div><button class="btn btn-success" onclick="markComplete('CS-102 :- MarkComplete T10 complete')">Press to mark completed</button></div></blockquote><h4 id="task-t11">Task T11</h4><p>Without using an interactive shell prompt, list the /etc/hosts file of the mariadb-0 pod.   </p><h4 id="hint-t11">Hint T11</h4><p>&#39;cat&#39; the /etc/hosts file.</p><hr><h4 id="step-by-step-t11">Step-by-Step T11</h4><br><pre><code>Command:<br>    kubectl exec mariadb-0 -- sh -c &#39;cat /etc/hosts&#39;<br><br>Example output:<br><br>    # Kubernetes-managed hosts file (host network).<br>    10.186.56.85     faststart-worker-1<br>    10.187.230.157   faststart-worker-2<br>    10.186.56.74     faststart-master-1<br>    10.186.56.74     faststart-master-1<br>    10.186.56.76     faststart-mgmt-1<br>    127.0.0.1 localhost<br>    . . .</code></pre><blockquote><p>Confirm T11 complete</p><div><button class="btn btn-success" onclick="markComplete('CS-102 :- MarkComplete T11 complete')">Press to mark completed</button></div></blockquote><hr><h4 id="task-t12">Task T12</h4><p>12 - How many builtin services are running in the cluster.  </p><h4 id="hint-t12">Hint T12</h4><p>This is cluster information.</p><hr><h4 id="step-by-step-t12">Step-by-Step T12</h4><br><pre><code>Command:<br>    kubectl cluster-info<br><br>Answer: count the items shown in the output<br><br>Example output:<br><br>Kubernetes master is running at https://169.62.194.213:8001<br>catalog-ui is running at https://169.62.194.213:8001/api/v1/namespaces/kube-system/services/catalog-ui:catalog-ui/proxy<br>Heapster is running at https://169.62.194.213:8001/api/v1/namespaces/kube-system/services/heapster/proxy<br>image-manager is running at https://169.62.194.213:8001/api/v1/namespaces/kube-system/services/image-manager:image-manager/proxy<br>CoreDNS is running at https://169.62.194.213:8001/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy<br>metrics-server is running at https://169.62.194.213:8001/api/v1/namespaces/kube-system/services/https:metrics-server:/proxy<br>platform-ui is running at https://169.62.194.213:8001/api/v1/namespaces/kube-system/services/platform-ui:platform-ui/proxy</code></pre><blockquote><p>Confirm T12 complete</p><div><button class="btn btn-success" onclick="markComplete('CS-102 :- MarkComplete T12 complete')">Press to mark completed</button></div></blockquote><hr><hr>